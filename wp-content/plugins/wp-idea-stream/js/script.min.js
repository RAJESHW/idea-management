/*! wp-idea-stream - v2.4.0-alpha - 2017-02-17 5:27:23 PM UTC - https://github.com/imath/wp-idea-stream */
!function(a){function b(b){a(".rating-info").html(wp_idea_stream_vars.wait_msg);var d="ideas/"+a("#rate").data("idea")+"/rate";window.isAjax.post(d,{rating:b}).done(function(b){b.idea_average_rate?a(".rating-info").html(wp_idea_stream_vars.success_msg+" "+b.idea_average_rate).fadeOut(2e3,function(){c(1),a(this).show()}):(a(".rating-info").html(wp_idea_stream_vars.error_msg),a.fn.raty("readOnly",!1,"#rate"))})}function c(b){var c,d=Number(wp_idea_stream_vars.rate_nb)+b;c=1===d?wp_idea_stream_vars.one_rate:"0"===d?wp_idea_stream_vars.not_rated:wp_idea_stream_vars.x_rate.replace("%",d),a(".rating-info").html("<a>"+c+"</a>")}window.isAjax={request:function(b,c,d){return c=c||{},!(!b||!d)&&(this.ajaxRequest=a.ajax({url:wp_idea_stream_vars.root_url+b,method:d,beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",wp_idea_stream_vars.nonce)},data:c}),this.ajaxRequest)},get:function(a,b){return this.request(a,b,"GET")},post:function(a,b){return this.request(a,b,"POST")}},wp_idea_stream_vars.canonical&&window.history.replaceState&&window.history.replaceState(null,null,wp_idea_stream_vars.canonical+window.location.hash),"undefined"!=typeof wp_idea_stream_vars.raty_loaded&&(c(0),a("div#rate").raty({cancel:!1,half:!1,halfShow:!0,starType:"i",readOnly:wp_idea_stream_vars.readonly,score:wp_idea_stream_vars.average_rate,targetKeep:!1,noRatedMsg:wp_idea_stream_vars.not_rated,hints:wp_idea_stream_vars.hints,number:wp_idea_stream_vars.hints_nb,click:function(c){wp_idea_stream_vars.can_rate&&(a.fn.raty("readOnly",!0,"#rate"),b(c))}})),"undefined"!=typeof wp_idea_stream_vars.tagging_loaded&&(a("#_wp_idea_stream_the_tags").tagging({"tags-input-name":"wp_idea_stream[_the_tags]","edit-on-delete":!1,"tag-char":"","forbidden-chars":[".","_","?","<",">"],"forbidden-words":["script"],"no-duplicate-text":wp_idea_stream_vars.duplicate_tag,"forbidden-chars-text":wp_idea_stream_vars.forbidden_chars,"forbidden-words-text":wp_idea_stream_vars.forbidden_words}),a("#_wp_idea_stream_the_title").focus(),a("#wp_idea_stream_most_used_tags .tag-items a").on("click",function(b){b.preventDefault(),a("#_wp_idea_stream_the_tags").tagging("add",a(this).html())}),a("#wp-idea-stream-form").on("reset",function(){a("#_wp_idea_stream_the_tags").tagging("reset")})),"undefined"!=typeof wp&&"undefined"!=typeof wp.heartbeat&&"undefined"!=typeof wp_idea_stream_vars.pulse&&(wp.heartbeat.interval(wp_idea_stream_vars.pulse),a.fn.extend({"heartbeat-send":function(){return this.bind("heartbeat-send.ideastream")}})),a(document).on("heartbeat-send.ideastream",function(a,b){b.ideastream_heartbeat_current_idea=wp_idea_stream_vars.idea_id}),a(document).on("heartbeat-tick",function(b,c){c.ideastream_heartbeat_response&&(a("#wp-idea-stream .message").length?(a("#wp-idea-stream .message").removeClass("error").addClass("info"),a("#wp-idea-stream .message p").html(wp_idea_stream_vars.warning)):a("#wp-idea-stream").prepend('<div class="message info"><p>'+wp_idea_stream_vars.warning+"</p></div>"),a('#wp-idea-stream .submit input[name="wp_idea_stream[save]"]').remove())}),"undefined"!=typeof wp_idea_stream_vars.is_profile&&("undefined"!=typeof wp_idea_stream_vars.profile_editing&&(a("#wp_idea_stream_profile_description").show(),a('textarea[name="wp_idea_stream_profile[description]"]').hide(),a("#wp_idea_stream_profile_form").on("submit",function(){a('textarea[name="wp_idea_stream_profile[description]"]').val(a("#wp_idea_stream_profile_description").html())}),a('#wp_idea_stream_profile_form input[type="submit"]').before(a(".wp-embed-share").html()),a(".wp-embed-share").remove()),a(".wp-embed-share-input").on("click",function(a){a.target.select()}),a(".wp-embed-share-dialog-open").on("click",function(){a(".wp-embed-share-dialog").removeClass("hidden"),a('.wp-embed-share-tab-button [aria-selected="true"]').focus()}),a(".wp-embed-share-dialog-close").on("click",function(){a(".wp-embed-share-dialog").addClass("hidden"),a(".wp-embed-share-dialog-open").focus()}),a(".wp-embed-share-tab-button button").on("click",function(b){var c=a(b.target).attr("aria-controls");a(".wp-embed-share-tab").each(function(b,d){c===a(d).prop("id")?a(d).attr("aria-hidden","false"):a(d).attr("aria-hidden","true")})}))}(jQuery);